function dateFormat(n){var t=("0"+n.getDate()).slice(-2),i=("0"+(n.getMonth()+1)).slice(-2);return n.getFullYear()+"-"+i+"-"+t}function getSelectedImages(n){for(var i=n.get(0).files,r=new FormData,t=0;t<i.length;t++)r.append(i[t].name,i[t]);return r}function AddUpdateCompanyListings(){this.CompanyListings="";this.CompanyListingProfile="";this.ListingAddress="";this.CompanyListingTimming="";this.ListingCategory="";this.ListingGallery="";this.ListingLandlineNo="";this.ListingMobileNo="";this.ListingPaymentsMode="";this.ListingPremium="";this.ListingServices="";this.ListingSocialMedia="";this.ListingsBusinessTypes="";this.VerifiedListing="";this.CustomerRegistration=""}function CCustomerRegistration(){this.Email="";this.Password=""}function CompanyListings(){this.CompanyName="";this.Id="";this.FirstName="";this.LastName="";this.Website="";this.MetaTitle="";this.MetaDescription="";this.MetaKeyword="";this.ListingStatus="";this.BannerImage="";this.BannerImageUrl="";this.CustomerId="";this.ListingTypeId=""}function CompanyListingProfile(){this.Id="";this.YearEstablished="";this.AnnualTurnOver="";this.NumberofEmployees="";this.ProfessionalAssociation="";this.Certification="";this.BriefAbout="";this.LocationOverview="";this.ProductAndServices="";this.ListingId=""}function ListingAddress(){this.Id="";this.BuildingAddress="";this.StreetAddress="";this.LandMark="";this.Area="";this.Latitude="";this.Longitude="";this.LatLogAddress="";this.CityId="";this.StateId="";this.CityAreaId="";this.CountryId="";this.ListingId=""}function CompanyListingTimming(){this.Id="";this.WeekDayNo="";this.DaysName="";this.TimeFrom="";this.TimeTo="";this.IsClosed="";this.ListingId=""}function ListingCategory(){this.Id="";this.ListingId="";this.MainCategoryId="";this.SubCategoryId=""}function ListingGallery(){this.Id="";this.FileName="";this.UploadDir="";this.FileType="";this.FileUrl="";this.ListingId=""}function ListingLandlineNo(){this.Id="";this.LandlineNumber="";this.ListingId=""}function ListingMobileNo(){this.Id="";this.MobileNo="";this.ListingId=""}function ListingPaymentsMode(){this.Id="";this.ListingId="";this.ModeId=""}function ListingPremium(){this.Id="";this.ListingId="";this.PackageId="";this.ModeId=""}function ListingServices(){this.Id="";this.ListingId="";this.ServiceTypeId=""}function ListingsBusinessTypes(){this.Id="";this.ListingId="";this.BusinessId=""}function ListingSocialMedia(){this.Id="";this.Name="";this.MediaId="";this.SitePath="";this.ListingId=""}function VerifiedListing(){this.Id="";this.ListingId="";this.VerificationId=""}function ListingGallery(){this.Id="";this.FileName="";this.UploadDir="";this.FileType="";this.FileUrl="";this.ListingId=""}function GetButtonValue(){$("#btnSave").prop("disabled",!1);$("#MainSection").hide();toastr.success("Company Listings Updated Successfully","Success");window.location.href="/ClientListing/Index";ResetCompanyListings()}function fillCompanyList(){var n=new CompanyListings;return n.Id=$("#UCompListingsId").val(),n.ListingTypeId=$("#UCLstListingType").val(),n.CompanyName=$("#UCLstCompanyName").val(),n.FirstName=$("#UCLstFirstName").val(),n.LastName=$("#UCLstLastName").val(),n.Website=$("#UCLstWebSite").val(),n.MetaTitle=$("#UCLstMetaTitle").val(),n.MetaKeyword=$("#UCLstMetaKeyword").val(),n.MetaDescription=$("#UCLstMetaDescription").val(),n}function Registration(){var n=new CCustomerRegistration,t=$("input[name='inlineRadioOptions']:checked").val();return t=="IsNew"&&(n.Email=$("#ACLstEmail").val(),n.Password=$("#ACLstPassword").val()),n}function fillcompListingProfile(){var n=new CompanyListingProfile;return n.Id=$("#UCompProfileId").val(),n.ListingId=$("#UCompListingsId").val(),n.YearEstablished=$("#UCLstYears").val(),n.AnnualTurnOver=$("#UCLstAnnualTurnover").val(),n.Certification=$("#UCLstCertifications").val(),n.BriefAbout=$("#UCLstBreifAbout").val(),n.LocationOverview=$("#UCLstLocationOverview").val(),n.ProductAndServices=$("#UCLstProductAndServices").val(),n.ProfessionalAssociation=$("#UCLstProfAss").val(),n.NumberofEmployees=$("#UCLstNoEmployee").val(),n}function CompanyListingAddress(){var n=new ListingAddress;return n.Id=$("#UAddressId").val(),n.ListingId=$("#UCompListingsId").val(),n.StateId=$("#UCLstState").val(),n.CityId=$("#UCLstCity").val(),n.CityAreaId=$("#UCLstCityArea").val(),n.BuildingAddress=$("#UCLstBuildingAddress").val(),n.StreetAddress=$("#UCLstStreetAddress").val(),n.LandMark=$("#UCLstLandMark").val(),n.Latitude=$("#UCLstLatitude").val(),n.Longitude=$("#UCLstLongitude").val(),n.LatLogAddress=$("#UCLstAddress").val(),n}function CompanyTimming(){for(var n,i=[],t=1;t<8;t++)n=new CompanyListingTimming,n.WeekDayNo=t,n.ListingId=$("#UCompListingsId").val(),n.DaysName=$("#UCLstWeekDaysName"+t).text(),n.TimeFrom=$("#UCLstFromTimming"+t).val(),n.TimeTo=$("#UCLstToTimming"+t).val(),n.IsClosed=$("#UCLstToTimmingClosed"+t).prop("checked")==!0?!0:!1,n.ListingId="",i.push(n);return i}function CompanyListingCategory(){var n=[],t=$("#UCLstSubCategory").val();return t.length>0&&$("#UCLstSubCategory :selected").each(function(){var t=new ListingCategory;t.ListingId=$("#UCompListingsId").val();t.MainCategoryId=$("#UCLstCategory").val();t.SubCategoryId=$(this).val();n.push(t)}),n}function CompanyListingLandlineNo(){var r=[],t,i,n;if($("#UCLstLandLineNumber").val()!="")for(t=new ListingLandlineNo,t.LandlineNumber=$("#UCLstLandLineNumber").val(),t.ListingId=$("#UCompListingsId").val(),r.push(t),i=1;i<2;i++)n=new ListingLandlineNo,n.LandlineNumber=$("#UCLstLandLineNumber"+i).val(),n.ListingId=$("#UCompListingsId").val(),n.LandlineNumber!=null&&n.LandlineNumber!=undefined&&r.push(n);return r}function CompListingMobileNo(){var i=[],r=new ListingMobileNo,t,n;for(r.MobileNo=$("#UCLstMobileNumber").val(),r.ListingId=$("#UCompListingsId").val(),i.push(r),t=1;t<2;t++)n=new ListingMobileNo,n.MobileNo=$("#UCLstMobileNumber"+t).val(),n.ListingId=$("#UCompListingsId").val(),n.MobileNo!=null&&n.MobileNo!=undefined&&i.push(n);return i}function CompanyPaymentMode(){var n=[];return $("#UCLstPaymentsModes :selected").each(function(){var t=new ListingPaymentsMode;t.ModeId=$(this).val();t.ListingId=$("#UCompListingsId").val();n.push(t)}),n}function CompanyListingServices(){var n=[];return $("#UCLstServicetypes :selected").each(function(){var t=new ListingServices;t.ServiceTypeId=$(this).val();t.ListingId=$("#UCompListingsId").val();n.push(t)}),n}function CompanyListingSocialMedia(){for(var n,i=[],t=1;t<6;t++)n=new ListingSocialMedia,n.Name=$("#UCLstSocialMediaNodesName"+t).text(),n.SitePath=$("#UCLstSocialMediaNodes"+t).val(),n.ListingId=$("#UCompListingsId").val(),i.push(n);return i}function CompanyListingsBusinessTypes(){var n=[];return $("#UCLstBusinessTypes :selected").each(function(){var t=new ListingsBusinessTypes;t.BusinessId=$(this).val();t.ListingId=$("#ECompanyListingId").val();n.push(t)}),n}function RemoveLandLineNo(){$("#RemovedivLandLine").remove()}function RemoveMobNo(){$("#RemovedivMobileNumber").remove()}function RemoveBannerImage(){var t=$("#UtargetImg"),n=getSelectedImages($("#Uimagefiles"));$.ajax({url:"/ClientListing/DeleteBannerImage?Id="+$("#ECompanyListingId").val(),type:"post",datatype:"json",data:n,"async":!1,cache:!1,contentType:!1,processData:!1,success:function(n){n>0?toastr.success("Banner Image is deleted successfully","Success"):toastr.error(n,"Error")},error:function(n){toastr.error(n,"Error")}});$("#UCLTDeleteBannerImage").children("div").remove();$("#UCLTDeleteBannerImage").append('<div class="row"><figure class= "col-lg-12 col-md-12 col-sm-12 col-xs-12" itemprop = "associatedMedia" itemscope itemtype = "http://schema.org/ImageObject"><img class="img-fluid" itemprop="thumbnail" alt="Image description" id="UtargetImg" /><button class="close" onclick="RemoveBannerImage()">X<\/button><\/figure ><\/div >');$("#UtargetImg").attr("src","/app-assets/images/portrait/small/avatar-s-19.jpg")}function GetCheckBoxValue(n){var t=$("#"+n).val();t=="UCLstToTimmingClosed1"?$("#"+t).prop("checked")==!0?($("#UCLstFromTimming1").attr("disabled",!0),$("#UCLstToTimming1").attr("disabled",!0),$("#UCLstFromTimming1").val("Closed"),$("#UCLstToTimming1").val("Closed")):($("#UCLstFromTimming1").attr("disabled",!1),$("#UCLstToTimming1").attr("disabled",!1),$("#UCLstFromTimming1").val("Open 24 Hrs"),$("#UCLstToTimming1").val("Open 24 Hrs")):t=="UCLstToTimmingClosed2"?$("#"+t).prop("checked")==!0?($("#UCLstFromTimming2").attr("disabled",!0),$("#UCLstToTimming2").attr("disabled",!0),$("#UCLstFromTimming2").val("Closed"),$("#UCLstToTimming2").val("Closed")):($("#UCLstFromTimming2").attr("disabled",!1),$("#UCLstToTimming2").attr("disabled",!1),$("#UCLstFromTimming2").val("Open 24 Hrs"),$("#UCLstToTimming2").val("Open 24 Hrs")):t=="UCLstToTimmingClosed3"?$("#"+t).prop("checked")==!0?($("#UCLstFromTimming3").attr("disabled",!0),$("#UCLstToTimming3").attr("disabled",!0),$("#UCLstFromTimming3").val("Closed"),$("#UCLstToTimming3").val("Closed")):($("#UCLstFromTimming3").attr("disabled",!1),$("#UCLstToTimming3").attr("disabled",!1),$("#UCLstFromTimming3").val("Open 24 Hrs"),$("#UCLstToTimming3").val("Open 24 Hrs")):t=="UCLstToTimmingClosed4"?$("#"+t).prop("checked")==!0?($("#UCLstFromTimming4").attr("disabled",!0),$("#UCLstToTimming4").attr("disabled",!0),$("#UCLstFromTimming4").val("Closed"),$("#UCLstToTimming4").val("Closed")):($("#UCLstFromTimming4").attr("disabled",!1),$("#UCLstToTimming4").attr("disabled",!1),$("#UCLstFromTimming4").val("Open 24 Hrs"),$("#UCLstToTimming4").val("Open 24 Hrs")):t=="UCLstToTimmingClosed5"?$("#"+t).prop("checked")==!0?($("#UCLstFromTimming5").attr("disabled",!0),$("#UCLstToTimming5").attr("disabled",!0),$("#UCLstFromTimming5").val("Closed"),$("#UCLstToTimming5").val("Closed")):($("#UCLstFromTimming5").attr("disabled",!1),$("#UCLstToTimming5").attr("disabled",!1),$("#UCLstFromTimming5").val("Open 24 Hrs"),$("#UCLstToTimming5").val("Open 24 Hrs")):t=="UCLstToTimmingClosed6"?$("#"+t).prop("checked")==!0?($("#UCLstFromTimming6").attr("disabled",!0),$("#UCLstToTimming6").attr("disabled",!0),$("#UCLstFromTimming6").val("Closed"),$("#UCLstToTimming6").val("Closed")):($("#UCLstFromTimming6").attr("disabled",!1),$("#UCLstToTimming6").attr("disabled",!1),$("#UCLstFromTimming6").val("Open 24 Hrs"),$("#UCLstToTimming6").val("Open 24 Hrs")):t=="UCLstToTimmingClosed7"&&($("#"+t).prop("checked")==!0?($("#UCLstFromTimming7").attr("disabled",!0),$("#UCLstToTimming7").attr("disabled",!0),$("#UCLstFromTimming7").val("Closed"),$("#UCLstToTimming7").val("Closed")):($("#UCLstFromTimming7").attr("disabled",!1),$("#UCLstToTimming7").attr("disabled",!1),$("#UCLstFromTimming7").val("Open 24 Hrs"),$("#UCLstToTimming7").val("Open 24 Hrs")))}function handleFileSelect(){var t,u,n,i,r;if(window.File&&window.FileList&&window.FileReader)for(t=event.target.files,u=document.getElementById("UMImageLink"),n=0;n<t.length;n++)(i=t[n],i.type.match("image"))&&(r=new FileReader,r.addEventListener("load",function(n){var s=$("#UMImageLink> figure").length,r,f;s+=1;var e=ReturnId(),i="UMtargetImg"+e,h=n.target,t=document.createElement("figure"),o=document.createAttribute("itemprop");o.value="associatedMedia";t.setAttributeNode(o);r=document.createAttribute("itemtype");r.value="http://schema.org/ImageObject";t.setAttributeNode(r);f=document.createAttribute("itemscope");f.value="";t.setAttributeNode(f);t.innerHTML='<div class="parent"><img class="img - thumbnail img - fluid"  itemprop="thumbnail" alt="Image description" value="'+e+'"  id="'+i+'" style="width:270px; height:138px;" /><button class="close" id="btnRemoveImage" onclick="RemoveImage('+i+')">x<\/button><\/div><\/figure > &nbsp;&nbsp;';u.insertBefore(t,null);$("#"+i).attr("src",h.result)}),r.readAsDataURL(i));else console.log("Your browser does not support File API")}function ReturnId(){var n=1,t=[],i,r;for($(".parent").find("img").each(function(){t.push(this.attributes.value.value)}),i=0;i<t.length;i++){if(r=jQuery.inArray(n.toString(),t),r==-1)return n;n+=1}return n}function RemoveImage(n){var r=$(n).parent().parent(),u=confirm("Do you want to delete Gallery image?"),t,i;u==!0&&(t=n.attributes.src.value,i=t.includes("data:image/"),i==!1&&$.ajax({url:"/ClientListing/DeleteGalleryImage",type:"Get",datatype:"json","async":!1,data:{Url:n.attributes.src.value,ImgId:n.attributes.value.value},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n>0&&toastr.success("Gallery Image is deleted successfully","Success")},error:function(n){toastr.error(n,"Error")}}),$(r).remove())}function ResetCompanyListings(){$("#UCLstCustomer").val("").trigger("change");$("#UCLstCustomer").val("");$("#UCLstListingType").val("");$("#UCLstCompanyName").val("");$("#UCLstFirstName").val("");$("#UCLstLastName").val("");$("#UCLstMobileNumber").val("");$("#UCLstLandLineNumber").val("");$("#UCLstWebSite").val("");$("#UCLstMetaTitle").val("");$("#UCLstMetaKeyword").val("");$("#UCLstMetaDescription").val("");$("#UCLstEmail").val("");$("#UCLstPassword").val("");$("#UCLstCategory").val("");$("#UCLstSubCategory").val("");$("#UCLstCategory").val("").trigger("change");$("#UCLstSubCategory").val("").trigger("change");$("#UCLstNoEmployee").val("").trigger("change");$("#UCLstState").val("").trigger("change");$("#UCLstCity").val("").trigger("change");$("#UCLstCityArea").val("").trigger("change");$("#UCLstBuildingAddress").val("");$("#UCLstStreetAddress").val("");$("#UCLstLandMark").val("");$("#UCLstLatitude").val("");$("#UCLstLongitude").val("");$("#UCLstAddress").val("");$("#UCLstname").val("");$("#UCLstCertifications").val("");$("#UCLstBreifAbout").val("");$("#UCLstLocationOverview").val("");$("#UCLstPaymentsModes").val("").trigger("change");$("#UCLstServicetypes").val("").trigger("change");$("#UCLstBusinessTypes").val("").trigger("change");$("#UCLstFromTimming1").val("Open 24 Hrs").trigger("change");$("#UCLstToTimming1").val("Open 24 Hrs").trigger("change");$("#UCLstToTimmingClosed1").prop("checked",!1);$("#UCLstFromTimming2").val("Open 24 Hrs").trigger("change");$("#UCLstToTimming2").val("Open 24 Hrs").trigger("change");$("#UCLstToTimmingClosed2").prop("checked",!1);$("#UCLstFromTimming3").val("Open 24 Hrs").trigger("change");$("#UCLstToTimming3").val("Open 24 Hrs").trigger("change");$("#UCLstToTimmingClosed3").prop("checked",!1);$("#UCLstFromTimming4").val("Open 24 Hrs").trigger("change");$("#UCLstToTimming4").val("Open 24 Hrs").trigger("change");$("#UCLstToTimmingClosed4").prop("checked",!1);$("#UCLstFromTimming5").val("Open 24 Hrs").trigger("change");$("#UCLstToTimming5").val("Open 24 Hrs").trigger("change");$("#UCLstToTimmingClosed5").prop("checked",!1);$("#UCLstFromTimming6").val("Open 24 Hrs").trigger("change");$("#UCLstToTimming6").val("Open 24 Hrs").trigger("change");$("#UCLstToTimmingClosed6").prop("checked",!1);$("#UCLstFromTimming7").val("Open 24 Hrs").trigger("change");$("#UCLstToTimming7").val("Open 24 Hrs").trigger("change");$("#UCLstToTimmingClosed7").prop("checked",!1);$("#UCLstFromTimming1").attr("disabled",!1);$("#UCLstToTimming1").attr("disabled",!1);$("#UCLstFromTimming2").attr("disabled",!1);$("#UCLstToTimming2").attr("disabled",!1);$("#UCLstFromTimming3").attr("disabled",!1);$("#UCLstToTimming3").attr("disabled",!1);$("#UCLstFromTimming4").attr("disabled",!1);$("#UCLstToTimming4").attr("disabled",!1);$("#UCLstFromTimming5").attr("disabled",!1);$("#UCLstToTimming5").attr("disabled",!1);$("#UCLstFromTimming6").attr("disabled",!1);$("#UCLstToTimming6").attr("disabled",!1);$("#UCLstFromTimming7").attr("disabled",!1);$("#UCLstToTimming7").attr("disabled",!1);$("#Uimagefiles").val("");$("#UtargetImg").attr("src","/app-assets/images/portrait/small/avatar-s-19.jpg");$("#UMImageLink").children("figure").remove();$("#UAddMobileNumber").children("div").remove();$("#UAddLandNumber").children("div").remove()}var SocialMediaEnum,btnCLSave,AReadImage,AMReadImage;$(function(){jQuery.validator.addMethod("letteronly",function(n,t){return this.optional(t)||/^[A-Za-z ]+$/i.test(n)},"Enter only alphabetical characters");jQuery.validator.addMethod("numberonly",function(n,t){return this.optional(t)||/^[0-9]+$/i.test(n)},"Number Only");jQuery.validator.addMethod("numberonlyCnic",function(n,t){return this.optional(t)||/^[0-9-]+$/i.test(n)},"Number Only");jQuery.validator.addMethod("letternumberonly",function(n,t){return this.optional(t)||/^[a-zA-Z0-9 ]+$/i.test(n)},"Number and Alphabets Only");jQuery.validator.addMethod("emailRegex",function(n,t){return this.optional(t)||/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/i.test(n)},"Please Provide Correct Email");jQuery.validator.addMethod("passwordRegex",function(n,t){return this.optional(t)||/([^a-zA-Z\d])+([a-zA-Z\d])+|([a-zA-Z\d])+([^a-zA-Z\d])+/i.test(n)},"Password Must Contain AlphaNumeric With Special Character Like Etc_121");jQuery.validator.addMethod("StartDateFromCurrentDate",function(n,t){var i=new Date,r=new Date(Date.parse(n));return this.optional(t)||r>i||i.getMonth()+1==r.getMonth()+1&&i.getDate()==r.getDate()&&i.getFullYear()==r.getFullYear()},"Start Date Not Be Previous Date");jQuery.validator.addMethod("EndDateFromTodayDate",function(n,t){return this.optional(t)||new Date(Date.parse(n))>new Date},"End Date Lesser Then Today");jQuery.validator.addMethod("greaterThan",function(n,t,i){var r=$(i).val();return/Invalid|NaN/.test(new Date(n))?isNaN(n)&&isNaN(r)||Number(n)>Number(r):new Date(n)>new Date(r)},"Must be greater than StartDate.")});SocialMediaEnum={Facebook:"Facebook",Twitter:"Twitter",Instagram:"Instagram",Youtube:"Youtube",Linkedln:"Linkedln"};btnCLSave="";$(document).ready(function(){var n,t,i,r;$("#btnSave").prop("disabled",!1);n=$("#ECompanyListingId").val();t=$("#UCLstListingType");t.empty().append('<option selected="selected" value="" disabled = "disabled">Loading.....<\/option>');i=$("#UCLstCategory");i.empty().append('<option selected="selected" value="" disabled = "disabled">Loading.....<\/option>');r=$("#UCLstState");r.empty().append('<option selected="selected" value="" disabled = "disabled">Loading.....<\/option>');$.ajax({url:"/ClientListing/LoadClientCompanyListingList",type:"get",datatype:"json","async":!1,headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){t.empty().append('<option selected="selected" value="">Please select<\/option>');$.each(n.listingTypes,function(){t.append($("<option><\/option>").val(this.id).html(this.text))});i.empty().append('<option selected="selected" value="">Please select<\/option>');$.each(n.categories,function(){i.append($("<option><\/option>").val(this.id).html(this.text))});r.empty().append('<option selected="selected" value="">Please select<\/option>');$.each(n.states,function(){r.append($("<option><\/option>").val(this.id).html(this.text))});$.each(n.socialMediaModes,function(){$("#EditSocialMediaModesIds").append('<div class="form row"><div class="form-group col-md-3"><label id="UCLstSocialMediaNodesName'+this.id+'"><img src='+this.imageDir+" />"+this.name+'<\/label><\/div><div class="form-group col-md-9"><input type="Text" class="form-control" name="UCLstSocialMediaNodes'+this.id+'" id="UCLstSocialMediaNodes'+this.id+'" placeholder="https://www.'+this.name+'.com/"><\/div><\/div>')});n.stateId>0&&($("#UCLstState").attr("disabled",!0),$("#UCLstCity").attr("disabled",!0))},error:function(n){toastr.error(n,"Error")}});$("#UCLstCategory").select2({placeholder:"Please Select"});$("#UCLstSubCategory").select2({placeholder:"Please Select"});$("#UCLstPaymentsModes").select2({placeholder:"Please Select",ajax:{url:"/ClientListing/LoadPaymentModeList",dataType:"json",delay:250,type:"get","async":!1,headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},data:function(n){return{search:n.term,pageNo:n.page||1,pageSize:10}},processResults:function(n,t){return t.page=t.page||1,{results:n.paymentModes,pagination:{more:t.page*10<n.rowCount}}},cache:!0},escapeMarkup:function(n){return n},minimumInputLength:1});$("#UCLstServicetypes").select2({placeholder:"Please Select",ajax:{url:"/ClientListing/LoadTypeofServiceList",dataType:"json",delay:250,type:"get","async":!1,headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},data:function(n){return{search:n.term,pageNo:n.page||1,pageSize:10}},processResults:function(n,t){return t.page=t.page||1,{results:n.servicesType,pagination:{more:t.page*10<n.rowCount}}},cache:!0},escapeMarkup:function(n){return n},minimumInputLength:1});n!=""&&n!=null&&$.ajax({url:"/ClientListing/GetCompanyListingsById",type:"get",datatype:"json",data:{Id:n},"async":!1,headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){var u,i,r,f,t,e;if(n!=null){for($("#UCompListingsId").val(n.companyListings.id),$("#UCLstListingType").find('option[value="'+n.companyListings.listingTypeId+'"]').attr("selected","selected"),$("#UCLstListingType").attr("disabled",!0),$("#UCLstCompanyName").val(n.companyListings.companyName),$("#UCLstFirstName").val(n.companyListings.firstName),$("#UCLstLastName").val(n.companyListings.lastName),$("#UCLstWebSite").val(n.companyListings.website),$("#UCLstMetaTitle").val(n.companyListings.metaTitle),$("#UCLstMetaKeyword").val(n.companyListings.metaKeyword),$("#UCLstMetaDescription").val(n.companyListings.metaDescription),$("#UCLstMobileNumber").val(n.listingMobileNo[0].mobileNo),n.listingLandlineNo.length>0&&$("#UCLstLandLineNumber").val(n.listingLandlineNo[0].landlineNumber),n.listingMobileNo.length>1&&($("#UAddMobileNumber").append('<div class="input-group mb-1" data-repeater-item="" style="" id="RemovedivMobileNumber"><input type="text" placeholder="+92 000 000" class="form-control" id="UCLstMobileNumber1" maxlength="11"><span class="input-group-append" id="button-addon2"><button class="btn btn-danger" id="RemoveMobileNo" onclick="RemoveMobNo()"  type="button" data-repeater-delete=""><i class="ft-minus"><\/i><\/button> <\/span><\/div>'),$("#UCLstMobileNumber1").val(n.listingMobileNo[1].mobileNo)),n.listingLandlineNo.length>1&&($("#UAddLandNumber").append('<div class="input-group mb-1" data-repeater-item="" style="" id="RemovedivLandLine" > <input type="text" placeholder="0423-000000" class="form-control" id="UCLstLandLineNumber1" maxlength="12"><span class="input-group-append" id="button"><button class="btn btn-danger" id="RemoveLandNo"  onclick="RemoveLandLineNo()"  type="button" data-repeater-delete=""> <i class="ft-minus" id="test"><\/i><\/button><\/span><\/div>'),$("#UCLstLandLineNumber1").val(n.listingLandlineNo[1].landlineNumber)),n.listingCategory.length>0&&(u=new Option(n.listingCategory[0].mainCategoryName,n.listingCategory[0].mainCategoryId,!0,!0),$("#UCLstCategory").append(u).trigger("change"),$.each(n.listingCategory,function(t){var i=new Option(n.listingCategory[t].subCategoryName,n.listingCategory[t].subCategoryId,!0,!0);$("#UCLstSubCategory").append(i).trigger("change")})),n.listingAddress.stateId>0&&($("#UCLstState").find('option[value="'+n.listingAddress.stateId+'"]').attr("selected","selected"),u=new Option(n.listingAddress.cityName,n.listingAddress.cityId,!0,!0),$("#UCLstCity").append(u).trigger("change")),$("#UAddressId").val(n.listingAddress.id),$("#UCLstBuildingAddress").val(n.listingAddress.buildingAddress),$("#UCLstStreetAddress").val(n.listingAddress.streetAddress),$("#UCLstCityArea").val(n.listingAddress.cityAreaId),$("#UCLstLandMark").val(n.listingAddress.landMark),$("#UCLstLatitude").val(n.listingAddress.latitude),$("#UCLstLongitude").val(n.listingAddress.longitude),$("#UCLstAddress").val(n.listingAddress.latLogAddress),i=1,t=0;t<7;t++)$("#UCLstFromTimming"+i).val(n.companyListingTimming[t].timeFrom),$("#UCLstToTimming"+i).val(n.companyListingTimming[t].timeTo),$("#UCLstToTimmingClosed"+i).prop("checked",n.companyListingTimming[t].isClosed),$("#UCLstToTimmingClosed"+i).prop("checked")==!0?($("#UCLstFromTimming"+i).attr("disabled",!0),$("#UCLstToTimming"+i).attr("disabled",!0)):($("#UCLstFromTimming"+i).attr("disabled",!1),$("#UCLstToTimming"+i).attr("disabled",!1)),i+=1;for($("#UCLstYears").val(n.companyListingProfile.yearEstablished),$("#UCompProfileId").val(n.companyListingProfile.id),$("#UCLstAnnualTurnover").val(n.companyListingProfile.annualTurnOver),$("#UCLstNoEmployee").find('option[value="'+n.companyListingProfile.numberofEmployees+'"]').attr("selected","selected"),$("#UCLstProfAss").val(n.companyListingProfile.professionalAssociation),$("#UCLstCertifications").val(n.companyListingProfile.certification),$("#UCLstBreifAbout").val(n.companyListingProfile.briefAbout),$("#UCLstLocationOverview").val(n.companyListingProfile.locationOverview),$("#UCLstProductAndServices").val(n.companyListingProfile.productAndServices),$.each(n.listingPaymentsMode,function(t){var i=new Option(n.listingPaymentsMode[t].modeName,n.listingPaymentsMode[t].modeId,!0,!0);$("#UCLstPaymentsModes").append(i).trigger("change")}),$.each(n.listingsBusinessTypes,function(t){var i=new Option(n.listingsBusinessTypes[t].text,n.listingsBusinessTypes[t].businessId,!0,!0);$("#UCLstBusinessTypes").append(i).trigger("change")}),$.each(n.listingServices,function(t){var i=new Option(n.listingServices[t].serviceName,n.listingServices[t].serviceTypeId,!0,!0);$("#UCLstServicetypes").append(i).trigger("change")}),r=1,$.each(n.socialMediaModes,function(t){$("#UAddSocialMediaModesIds").append('<div class="form row"><div class="form-col col-md-3"><label id="UCLstSocialMediaNodesName'+r+'"><img src='+this.imagedir+" />"+this.name+'<\/label><\/div><div class="form-col col-md-9"><input type="Text" class="form-control" name="UCLstSocialMediaNodes'+r+'" id="UCLstSocialMediaNodes'+r+'" placeholder="https://www.'+this.name+'.com/"><\/div><\/div>');n.socialMediaModes[t].sitePath!=null&&($("#UCLstSocialMediaNodes"+r).val(n.socialMediaModes[t].sitePath),$("#UCLstSocialMediaNodesName"+r).text(n.socialMediaModes[t].name));r+=1}),f=0,n.companyListings.bannerImage==null?($("#UtargetImg").attr("src","/app-assets/images/portrait/small/avatar-s-19.jpg"),$("#UtargetImg").attr("value",n.companyListings.id)):($("#UtargetImg").attr("src",n.companyListings.bannerImage),$("#UtargetImg").attr("value",n.companyListings.id)),t=0;t<n.listingGallery.length;t++)f+=1,e="UMtargetImg"+n.listingGallery[t].id,$("#UMImageLink").append('<figure itemprop="associatedMedia" itemscope ="" itemtype="http://schema.org/ImageObject"><div class="parent"><img class="img - thumbnail img - fluid" itemprop="thumbnail" alt="Image description" id="UMtargetImg'+n.listingGallery[t].id+'" style="width:270px; height:138px;" /><button class="close" onclick="RemoveImage('+e+')">X<\/button><\/div><\/figure>&nbsp;&nbsp;'),$("#UMtargetImg"+n.listingGallery[t].id).attr("src",n.listingGallery[t].uploadDir),$("#UMtargetImg"+n.listingGallery[t].id).attr("value",n.listingGallery[t].id)}else toastr.error("Company Listings Not Exits","Error")},error:function(n){toastr.error(n,"Error")}})});$("ul#myTab li").click(function(){var n=$(this).children("a").text();n=="Gallery"?$("#btnSave").css("visibility","visible"):$("#btnSave").css("visibility","hidden")});$("#EditCompanyListings_Submit_Form").validate({ignore:!1,rules:{UCLstListingType:{required:!0,numberonly:!0},UCLstCompanyName:{required:!0},UCLstFirstName:{required:!0,letteronly:!0},UCLstLastName:{required:!0,letteronly:!0},UCLstMobileNumber:{required:!0,numberonly:!0,minlength:function(){var n=$("#UCLstMobileNumber").val();if(n.length<11)return 11},maxlength:function(){var n=$("#UCLstMobileNumber").val();if(n.length>11)return 11}},UCLstLandLineNumber:{numberonly:!0,minlength:function(){var n=$("#UCLstLandLineNumber").val();if(n.length<11)return 11},maxlength:function(){var n=$("#UCLstLandLineNumber").val();if(n.length>11)return 11}},UCLstCity:{required:!0},UCLstState:{required:!0},UCLstAddress:{required:!0},UCLstCityArea:{required:!0},UCLstCategory:{required:!0},UCLstSubCategory:{required:!0}},messages:{UCLstListingType:{required:"Please Select Listing Type."},UCLstCompanyName:{required:"Please Enter Company Name."},UCLstFirstName:{required:"Please Enter First Name"},UCLstLastName:{required:"Please Enter Last Name"},UCLstMobileNumber:{required:"Please enter mobileNo ."},UCLstCity:{required:"Please enter city."},UCLstState:{required:"Please enter state."},UCLstAddress:{required:"Please enter Address"},UCLstCityArea:{required:"Please enter CityArea"},UCLstCategory:{required:"Please select Main Category"},UCLstSubCategory:{required:"Please Select Sub Category"}},highlight:function(n){$(n).closest(".form-group").addClass("text-danger");btnCLSave=="SaveNew"?$("#btnUpdateNew").attr("style",""):$("#btnUpdateClose").attr("style","")},unhighlight:function(n){$(n).closest(".form-group").removeClass("text-danger")},wrapper:"div",errorClass:"text-danger",errorPlacement:function(n,t){var i=$(t).parent().attr("id");i=="MobileNumber"?n.insertAfter("#MobileNumber"):i=="LandLineNumber"?n.insertAfter("#LandLineNumber"):i=="RemovedivMobileNumber"?n.insertAfter("#RemovedivMobileNumber"):i=="RemovedivLandLine"?n.insertAfter("#RemovedivLandLine"):i!="MobileNumber"&&i!="LandLineNumber"&&i!="RemovedivMobileNumber"&&i!="RemovedivLandLine"&&n.insertAfter(t)},submitHandler:function(){$("#btnSave").prop("disabled",!0);var n=new AddUpdateCompanyListings,t=fillcompListingProfile(),i=CompanyListingAddress(),r=CompanyTimming(),u=CompanyListingCategory(),f=CompanyListingLandlineNo(),e=CompListingMobileNo(),o=CompanyPaymentMode(),s=CompanyListingServices(),h=CompanyListingSocialMedia(),c=CompanyListingsBusinessTypes();n.CompanyListings=fillCompanyList();n.CompanyListingProfile=t!=null?t:null;n.ListingAddress=i!=null?i:null;n.CompanyListingTimming=r.length>0?r:null;n.ListingCategory=u.length>0?u:null;n.ListingLandlineNo=f.length>0?f:null;n.ListingMobileNo=e.length>0?e:null;n.ListingPaymentsMode=o.length>0?o:null;n.ListingServices=s.length>0?s:null;n.ListingsBusinessTypes=c.length>0?c:null;n.ListingSocialMedia=h.length>0?h:null;$.ajax({url:"/ClientListing/EditCompanyListing",type:"post",datatype:"json",data:{companyListings:n},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){if(n.error=="403")location.href="/Account/AccessDenied",$("#btnSave").prop("disabled",!1);else if(n>0){var t=$("#Uimagefiles").get(0).files,i=$("#UMimagefiles").get(0).files,r=getSelectedImages($("#Uimagefiles")),u=getSelectedImages($("#UMimagefiles"));t.length>0&&$.ajax({url:"/ClientListing/UpdateBannerImage?Id="+n,type:"post",datatype:"json",data:r,"async":!1,cache:!1,contentType:!1,processData:!1,success:function(){},error:function(n){$("#btnSave").prop("disabled",!1);toastr.error(n,"Error")}});i.length>0&&$.ajax({url:"/ClientListing/UpdateGalleryBannerImage?Id="+n,type:"post",datatype:"json",data:u,"async":!1,cache:!1,contentType:!1,processData:!1,success:function(){},error:function(n){$("#btnSave").prop("disabled",!1);toastr.error(n,"Error")}});GetButtonValue();btnCLSave=undefined}else n==0?($("#btnSave").prop("disabled",!1),toastr.error("Company Listings is not Updated Successfully","Error")):(GetButtonValue(),btnCLSave=undefined)},error:function(n){$("#btnSave").prop("disabled",!1);toastr.error(n,"Error")}})}});$("#UCLstMobileNumber").focusout(function(){var n=$(this).val(),t=$("#ECompanyListingId").val();n!=""&&$.ajax({url:"/AdminCommon/CheckMobileNoExits",type:"get",datatype:"json",data:{MobileNo:n,Id:t},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n==0&&(toastr.error("Number Already Exits."),$("#UCLstMobileNumber").val(""),$("#UCLstMobileNumber").focus())},error:function(n){toastr.error(n)}})});$(document).on("focusout","#UCLstMobileNumber1",function(){var n=$(this).val(),t=$("#ECompanyListingId").val();n!=""&&$.ajax({url:"/AdminCommon/CheckMobileNoExits",type:"get",datatype:"json",data:{MobileNo:n,Id:t},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n==0&&(toastr.error("Number Already Exits."),$("#UCLstMobileNumber1").val(""),$("#UCLstMobileNumber1").focus())},error:function(n){toastr.error(n)}})});$("#UCLstLandLineNumber").focusout(function(){var n=$(this).val(),t=$("#ECompanyListingId").val();n!=""&&$.ajax({url:"/AdminCommon/CheckLandineNoExits",type:"get",datatype:"json",data:{LandLineNo:n,Id:t},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n==0&&(toastr.error("Number Already Exits."),$("#UCLstLandLineNumber").val(""),$("#UCLstLandLineNumber").focus())},error:function(n){toastr.error(n)}})});$(document).on("focusout","#UCLstLandLineNumber1",function(){var n=$(this).val(),t=$("#ECompanyListingId").val();n!=""&&$.ajax({url:"/AdminCommon/CheckLandineNoExits",type:"get",datatype:"json",data:{LandLineNo:n,Id:t},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n==0&&(toastr.error("Number Already Exits."),$("#UCLstLandLineNumber1").val(""),$("#UCLstLandLineNumber1").focus())},error:function(n){toastr.error(n)}})});$("#btnUpdateNew").click(function(){btnCLSave=$("#btnUpdateNew").val();$("#EditCompanyListings_Submit_Form").valid()});$("#btnUpdateClose").click(function(){btnCLSave=$("#btnUpdateClose").val();$("#EditCompanyListings_Submit_Form").valid()});$("#btnClose").click(function(){$("#MainSection").hide();window.location.href=$("#btnClose").val()=="Profile"?"/profileUser/Profile":"/ClientListing/Index"});$("#EditbtnCrossForm").click(function(){$("#MainSection").hide();window.location.href="/ClientListing/Index"});$("#btnAddMobile").click(function(){if($("#UCLstMobileNumber").val()==""){alert("Please Enter Phone No first.");return}if($(":input[id^=UCLstMobileNumber1]").length==1){alert("Only Allow two Phone Number.");return}$("#UAddMobileNumber").append('<div class="input-group mb-1" data-repeater-item="" style="" id="RemovedivMobileNumber"><input type="text" placeholder="+92 000 000" class="form-control"  name="UCLstMobileNumber1" id="UCLstMobileNumber1" maxlength="11"><span class="input-group-append" id="button-addon2"><button class="btn btn-danger" id="RemoveMobileNo" onclick="RemoveMobNo()"  type="button" data-repeater-delete=""><i class="ft-minus"><\/i><\/button> <\/span><\/div>');$("#UCLstMobileNumber1").rules("add",{required:!0,numberonly:!0,messages:{required:"Please enter Second Mobile Number"}})});$("#btnAddLandNo").click(function(){if($("#UCLstLandLineNumber").val()==""){alert("Please Enter Land Line No first.");return}if($(":input[id^=UCLstLandLineNumber1]").length==1){alert("Only Allow two Landline Number.");return}$("#UAddLandNumber").append('<div class="input-group mb-1" data-repeater-item="" style="" id="RemovedivLandLine" > <input type="text" placeholder="0423-000000" class="form-control" name="UCLstLandLineNumber1" id="UCLstLandLineNumber1" maxlength="11"><span class="input-group-append" id="button"><button class="btn btn-danger" id="RemoveLandNo"  onclick="RemoveLandLineNo()"  type="button" data-repeater-delete=""> <i class="ft-minus" id="test"><\/i><\/button><\/span><\/div>');$("#UCLstLandLineNumber1").rules("add",{numberonly:!0,messages:{required:"Please enter Second Landline Number"}})});$("#Uimagefiles").change(function(){var n=this.files;n&&n[0]&&AReadImage(n[0])});AReadImage=function(n){var t=new FileReader,i=new Image;t.readAsDataURL(n);t.onload=function(t){i.src=t.target.result;i.onload=function(){var i=this.height,r=this.width,u=n.type,f=~~(n.size/1024)+"KB";$("#UtargetImg").attr("src",t.target.result)}}};AMReadImage=function(n){var t=new FileReader,i=new Image;t.readAsDataURL(n);t.onload=function(t){i.src=t.target.result;i.onload=function(){var r=this.name,u=this.height,f=this.width,e=n.type,o=~~(n.size/1024)+"KB",i=$("#UMImageLink> figure").length;i+=1;$("#UMImageLink").append('<figure class="col-lg-3 col-md-6 col-sm-6 col-xs-12" itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject"><a href="app-assets/images/gallery/1.jpg" itemprop="contentUrl" data-size="480x360"><img class="img - thumbnail img - fluid" itemprop="thumbnail" alt="Image description" id="AMtargetImg'+i+'" /><\/a><\/figure>');$("#UMtargetImg"+i).attr("src",t.target.result)}}};document.getElementById("UMimagefiles")!=null&&document.getElementById("UMimagefiles").addEventListener("change",handleFileSelect,!1);$("#UCLstState").change(function(){$("#UCLstCity").val("").trigger("change");$("#UCLstBuildingAddress").val("");$("#UCLstStreetAddress").val("");$("#UCLstLandMark").val("");$("#UCLstLatitude").val("");$("#UCLstLongitude").val("");$("#UCLstAddress").val("");var n=$("#UCLstCity");n.empty().append('<option selected="selected" value="" disabled = "disabled">Loading.....<\/option>');$("#UCLstState").val()>0?$.ajax({url:"/ClientListing/GetCityListById",dataType:"json",delay:250,type:"get",data:{Id:$("#UCLstState").val()},"async":!1,headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(t){n.empty().append('<option selected="selected" value="">Please select<\/option>');$.each(t,function(i){n.append($("<option><\/option>").val(t[i].id).html(t[i].name))})},cache:!0}):n.empty().append('<option selected="selected" value="">Please select<\/option>')});$("#UCLstCity").change(function(){$("#UCLstBuildingAddress").val("");$("#UCLstStreetAddress").val("");$("#UCLstLandMark").val("");$("#UCLstLatitude").val("");$("#UCLstLongitude").val("");$("#UCLstAddress").val("");var n=$("#UCLstCityArea");n.empty().append('<option selected="selected" value="" disabled = "disabled">Loading.....<\/option>');$("#UCLstCity").val()>0?$.ajax({url:"/ClientListing/GetCityAreaById",dataType:"json",delay:250,type:"get",data:{Id:$("#UCLstCity").val()},"async":!1,headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(t){n.empty().append('<option selected="selected" value="">Please select<\/option>');$.each(t,function(i){n.append($("<option><\/option>").val(t[i].id).html(t[i].name))})},cache:!0}):n.empty().append('<option selected="selected" value="">Please select<\/option>')});$("#UCLstCategory").change(function(){$("#UCLstCategory").val()>0&&($("#UCLstSubCategory").val(""),$("#UCLstSubCategory").select2({placeholder:"Please Select",ajax:{url:"/ClientListing/LoadAddSubMenuCategories",dataType:"json",delay:250,type:"get","async":!1,headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},data:function(n){return{search:n.term,pageNo:n.page||1,pageSize:10,CategoryId:$("#UCLstCategory").val()}},processResults:function(n,t){return t.page=t.page||1,{results:n.subMenuCategoryList,pagination:{more:t.page*10<n.rowCount}}},cache:!0},escapeMarkup:function(n){return n},minimumInputLength:1,multiple:!0}))});$("#UCLstBusinessTypes").select2({placeholder:"Please Select",ajax:{url:"/ClientListing/LoadBussinessType",dataType:"json",delay:250,type:"get","async":!1,headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},processResults:function(n){return{results:n}}},minimumInputLength:1});
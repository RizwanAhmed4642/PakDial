function dateFormat(n){var t=("0"+n.getDate()).slice(-2),i=("0"+(n.getMonth()+1)).slice(-2);return n.getFullYear()+"-"+i+"-"+t}function getSelectedImages(n){for(var i=n.get(0).files,r=new FormData,t=0;t<i.length;t++)r.append(i[t].name,i[t]);return r}function AddUpdateCompanyListings(){this.CompanyListings="";this.CompanyListingProfile="";this.ListingAddress="";this.CompanyListingTimming="";this.ListingCategory="";this.ListingGallery="";this.ListingLandlineNo="";this.ListingMobileNo="";this.ListingPaymentsMode="";this.ListingPremium="";this.ListingServices="";this.ListingSocialMedia="";this.ListingsBusinessTypes="";this.VerifiedListing="";this.CustomerRegistration=""}function CCustomerRegistration(){this.Email="";this.Password=""}function CompanyListings(){this.CompanyName="";this.Id="";this.FirstName="";this.LastName="";this.Website="";this.MetaTitle="";this.MetaDescription="";this.MetaKeyword="";this.ListingStatus="";this.BannerImage="";this.BannerImageUrl="";this.CustomerId="";this.ListingTypeId=""}function CompanyListingProfile(){this.Id="";this.YearEstablished="";this.AnnualTurnOver="";this.NumberofEmployees="";this.ProfessionalAssociation="";this.Certification="";this.BriefAbout="";this.LocationOverview="";this.ProductAndServices="";this.ListingId=""}function ListingAddress(){this.Id="";this.BuildingAddress="";this.StreetAddress="";this.LandMark="";this.Area="";this.Latitude="";this.Longitude="";this.LatLogAddress="";this.CityId="";this.StateId="";this.CityAreaId="";this.CountryId="";this.ListingId=""}function CompanyListingTimming(){this.Id="";this.WeekDayNo="";this.DaysName="";this.TimeFrom="";this.TimeTo="";this.IsClosed="";this.ListingId=""}function ListingCategory(){this.Id="";this.ListingId="";this.MainCategoryId="";this.SubCategoryId=""}function ListingGallery(){this.Id="";this.FileName="";this.UploadDir="";this.FileType="";this.FileUrl="";this.ListingId=""}function ListingLandlineNo(){this.Id="";this.LandlineNumber="";this.ListingId=""}function ListingMobileNo(){this.Id="";this.MobileNo="";this.ListingId=""}function ListingPaymentsMode(){this.Id="";this.ListingId="";this.ModeId=""}function ListingPremium(){this.Id="";this.ListingId="";this.PackageId="";this.ModeId=""}function ListingServices(){this.Id="";this.ListingId="";this.ServiceTypeId=""}function ListingsBusinessTypes(){this.Id="";this.ListingId="";this.BusinessId=""}function ListingSocialMedia(){this.Id="";this.Name="";this.MediaId="";this.SitePath="";this.ListingId=""}function VerifiedListing(){this.Id="";this.ListingId="";this.VerificationId=""}function ListingGallery(){this.Id="";this.FileName="";this.UploadDir="";this.FileType="";this.FileUrl="";this.ListingId=""}function ResetCompanyListings(){$("#UCLstCustomer").val("");$("#UCLstListingType").val("");$("#UCLstCompanyName").val("");$("#UCLstFirstName").val("");$("#UCLstLastName").val("");$("#UCLstWebSite").val("");$("#UCLstMetaTitle").val("");$("#UCLstMetaKeyword").val("");$("#UCLstMetaDescription").val("");$("#UCLstEmail").val("");$("#UCLstPassword").val("");$("#UCLstCategory").val("");$("#UCLstSubCategory").val("");$("#UCLstState").val("");$("#UCLstCity").val("");$("#UCLstBuildingAddress").val("");$("#UCLstStreetAddress").val("");$("#UCLstLandMark").val("");$("#UCLstArea").val("");$("#UCLstLatitude").val("");$("#UCLstLongitude").val("");$("#UCLstAddress").val("");$("#UCLstname").val("");$("#UCLstCertifications").val("");$("#UCLstBreifAbout").val("");$("#UCLstLocationOverview").val("");$("#UCLstPaymentsModes").val("");$("#UCLstServicetypes").val("");$("#Uimagefiles").val("");$("#UtargetImg").attr("src","")}var SocialMediaEnum,UReadImage;$(function(){jQuery.validator.addMethod("letteronly",function(n,t){return this.optional(t)||/^[A-Za-z ]+$/i.test(n)},"Enter only alphabetical characters");jQuery.validator.addMethod("numberonly",function(n,t){return this.optional(t)||/^[0-9]+$/i.test(n)},"Number Only");jQuery.validator.addMethod("numberonlyCnic",function(n,t){return this.optional(t)||/^[0-9-]+$/i.test(n)},"Number Only");jQuery.validator.addMethod("letternumberonly",function(n,t){return this.optional(t)||/^[a-zA-Z0-9 ]+$/i.test(n)},"Number and Alphabets Only");jQuery.validator.addMethod("emailRegex",function(n,t){return this.optional(t)||/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/i.test(n)},"Please Provide Correct Email");jQuery.validator.addMethod("passwordRegex",function(n,t){return this.optional(t)||/([^a-zA-Z\d])+([a-zA-Z\d])+|([a-zA-Z\d])+([^a-zA-Z\d])+/i.test(n)},"Password Must Contain AlphaNumeric With Special Character Like Etc_121");jQuery.validator.addMethod("StartDateFromCurrentDate",function(n,t){var i=new Date,r=new Date(Date.parse(n));return this.optional(t)||r>i||i.getMonth()+1==r.getMonth()+1&&i.getDate()==r.getDate()&&i.getFullYear()==r.getFullYear()},"Start Date Not Be Previous Date");jQuery.validator.addMethod("EndDateFromTodayDate",function(n,t){return this.optional(t)||new Date(Date.parse(n))>new Date},"End Date Lesser Then Today");jQuery.validator.addMethod("greaterThan",function(n,t,i){var r=$(i).val();return/Invalid|NaN/.test(new Date(n))?isNaN(n)&&isNaN(r)||Number(n)>Number(r):new Date(n)>new Date(r)},"Must be greater than StartDate.")});SocialMediaEnum={Facebook:"Facebook",Twitter:"Twitter",Instagram:"Instagram",Youtube:"Youtube",Linkedln:"Linkedln"};$(function(){$("#ClientCompanyListings").DataTable({processing:!0,serverSide:!0,destroy:!0,ordering:!0,responsive:!0,autoWidth:!1,order:[[0,"desc"]],ajax:{url:"/ClientListing/LoadClientCompanyListings",type:"POST",datatype:"json",headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()}},columns:[{data:"id",name:"id",orderable:!0,render:function(n,t,i,r){return r.row+r.settings._iDisplayStart+1}},{data:"companyName",name:"companyName",orderable:!1},{data:"fullName",name:"fullName",orderable:!1},{data:"listingType",name:"listingType",orderable:!1},{data:"requestCounter",name:"requestCounter",orderable:!1},{data:"updatedDate",name:"updatedDate",orderable:!1,render:function(n){var t=new Date(n),i=t.getMonth()+1;return(i.toString().length>1?i:"0"+i)+"/"+t.getDate()+"/"+t.getFullYear()}},],columnDefs:[{targets:0},{targets:1},{targets:2},{targets:3},{targets:4},{targets:5},{targets:6,render:function(n,t,i){var r=i.id,u="<span id="+r+' class="edit-lst-icn"><img  id="UpdateCompanyListingsModal" src="/PakDial-assets/images/edit-list.png"><\/span>',f="<span id="+r+' class="pay-lst-icn"><img  id="UpdateUnPaidModal" src="/PakDial-assets/images/pay-edit.png"><\/span>';return"<td> "+u+" "+f+" <\/td>"}}]});$("#UTransferCutIdId").select2({placeholder:"Please Select",allowClear:!0,ajax:{url:"/AdminCompanyListings/LoadCustomersList",dataType:"json",delay:250,type:"get","async":!1,headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},data:function(n){return{search:n.term,pageNo:n.page||1,pageSize:10,isDefault:!1}},processResults:function(n,t){return t.page=t.page||1,{results:n.customerList,pagination:{more:t.page*10<n.rowCount}}},cache:!0},escapeMarkup:function(n){return n},minimumInputLength:1})});$("#AdminCompanyListings").on("click","#VerifyCompanyListingsModal",function(){var n=$(this).val();n!=""&&n!=null&&$.ajax({url:"/AdminCompanyListings/VerifyUnVerifyListing",type:"get",datatype:"json","async":!1,data:{Id:n,name:"Verify"},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n.error=="403"?location.href="/Account/AccessDenied":n==1?(toastr.success("Listing Verified Successfully","Success"),$("#AdminCompanyListings").DataTable().ajax.reload()):toastr.error("Company Listing Not Deleted","Error")},error:function(n){toastr.error(n,"Error")}})});$("#AdminCompanyListings").on("click","#VerifiedCompanyListingsModal",function(){var n=$(this).val();n!=""&&n!=null&&$.ajax({url:"/AdminCompanyListings/VerifyUnVerifyListing",type:"get",datatype:"json","async":!1,data:{Id:n,name:"UnVerify"},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n.error=="403"?location.href="/Account/AccessDenied":n==1?(toastr.success("Listing UnVerified Successfully","Success"),$("#AdminCompanyListings").DataTable().ajax.reload()):toastr.error("Company Listing Not Unverified","Error")},error:function(n){toastr.error(n,"Error")}})});$("#AdminCompanyListings").on("click","#InActiveCompanyListingsModal",function(){var n=$(this).val();n!=""&&n!=null&&$.ajax({url:"/AdminCompanyListings/ActiveInActiveList",type:"get",datatype:"json","async":!1,data:{Id:n,Status:"Active"},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n.error=="403"?location.href="/Account/AccessDenied":n>0?(toastr.success("Listing InActive Successfully","Success"),$("#AdminCompanyListings").DataTable().ajax.reload()):toastr.error("Company Listing Not Active","Error")},error:function(n){toastr.error(n,"Error")}})});$("#AdminCompanyListings").on("click","#ActiveCompanyListingsModal",function(){var n=$(this).val();n!=""&&n!=null&&$.ajax({url:"/AdminCompanyListings/ActiveInActiveList",type:"get",datatype:"json","async":!1,data:{Id:n,Status:"InActive"},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n.error=="403"?location.href="/Account/AccessDenied":n>0?(toastr.success("Listing Active Successfully","Success"),$("#AdminCompanyListings").DataTable().ajax.reload()):toastr.error("Company Listing Not Active","Error")},error:function(n){toastr.error(n,"Error")}})});$("#AdminCompanyListings").on("click","#UpdateTransferOwnershipModel",function(){var n=$(this).val();n!=""&&n!=null&&$.ajax({url:"/AdminCompanyListings/GetOwnerShip",type:"get",datatype:"json","async":!1,data:{ListingId:n},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n.error=="403"?location.href="/Account/AccessDenied":n.id>0?($("#UTransferCutIdId").val("").trigger("change"),$("#UTransferListingsId").val(n.id),$("#UTransferCompanyName").val(n.companyName),$("#UTransferFullName").val(n.firstName+n.lastName),$("#UpdateTransferOwnerShip").modal("show")):toastr.error("Listing Not Availible for Transfer","Error")},error:function(n){toastr.error(n,"Error")}})});$("#UpdateTransferOwnership_Submit_Form").validate({rules:{UTransferCutIdId:{required:!0,numberonly:!0}},messages:{UTransferCutIdId:{required:"Please Select Customer"}},highlight:function(n){$(n).closest(".form-group").addClass("text-danger")},unhighlight:function(n){$(n).closest(".form-group").removeClass("text-danger")},wrapper:"div",errorClass:"text-danger",errorPlacement:function(n,t){n.insertAfter(t)},submitHandler:function(){$("#UpdateTransferOwnershipShowLoader").show();$("#UpdateTransferOwnershipShowButtons").hide();$.ajax({url:"/AdminCompanyListings/TransferCustomerOwnerShip",type:"post",datatype:"json",data:{CustomerId:$("#UTransferCutIdId").val(),ListingId:$("#UTransferListingsId").val()},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n.error=="403"?location.href="/Account/AccessDenied":n==1?($("#UpdateTransferOwnerShip").modal("hide"),$("#UpdateTransferOwnershipShowLoader").hide(),$("#UpdateTransferOwnershipShowButtons").show(),toastr.success("Company Listings Transfer Successfully","Success"),$("#AdminCompanyListings").DataTable().ajax.reload()):($("#UpdateTransferOwnershipShowLoader").hide(),$("#UpdateTransferOwnershipShowButtons").show(),toastr.error("Company Listing Not Transfer","Error"))},error:function(n){$("#UpdateTransferOwnershipShowLoader").hide();$("#UpdateTransferOwnershipShowButtons").show();toastr.error(n,"Error")}})}});$("#ClientCompanyListings").on("click","#UpdateCompanyListingsModal",function(){var n=$(this).parent("span").attr("Id");window.location.href="/ClientListing/EditCompanyListing?Id="+n});$("#ClientCompanyListings").on("click","#UpdateUnPaidModal",function(){var n=$(this).parent("span").attr("Id");window.location.href="/ClientListing/PaymentMode?Id="+n});$("#AdminCompanyListings").on("click","#DeleteCompanyListingsModal",function(){var n=$(this).val(),t=$("#DeleteCompanyListings_Submit_Form").validate();t.resetForm();n!=""&&n!=null?($("#DCompanyListingsId").val(n),$("#DeleteCompanyListings").modal("show")):toastr.error("Company Listings Not Exits","Error")});$("#DeleteCompanyListings_Submit_Form").validate({rules:{},messages:{},submitHandler:function(){$("#DeleteListingTypesShowLoader").show();$("#DeleteListingTypesShowButtons").hide();$.ajax({url:"/AdminCompanyListings/DeleteCompanyListing",type:"post",datatype:"json",data:{Id:$("#DCompanyListingsId").val()},headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){n>1?($("#DeleteCompanyListings").modal("hide"),$("#DeleteCompanyListingsShowLoader").hide(),$("#DeleteCompanyListingsShowButtons").show(),toastr.success("Company Listings Deleted Successfully","Success"),$("#AdminCompanyListings").DataTable().ajax.reload()):n==-2?($("#DeleteCompanyListingsShowLoader").hide(),$("#DeleteCompanyListingsShowButtons").show(),toastr.warning("Please Delete its Child Data","Warning")):n.error=="403"?location.href="/Account/AccessDenied":($("#DeleteCompanyListingsShowLoader").hide(),$("#DeleteCompanyListingsShowButtons").show(),toastr.error("Company Listing Not Deleted","Error"))},error:function(n){$("#DeleteCompanyListingsShowLoader").hide();$("#DeleteCompanyListingsShowButtons").show();toastr.error(n,"Error")}})}});$("#Uimagefiles").change(function(){var n=this.files;n&&n[0]&&UReadImage(n[0])});UReadImage=function(n){var t=new FileReader,i=new Image;t.readAsDataURL(n);t.onload=function(t){i.src=t.target.result;i.onload=function(){var i=this.height,r=this.width,u=n.type,f=~~(n.size/1024)+"KB";$("#UtargetImg").attr("src",t.target.result)}}};